# Исследование объявлений о продаже квартир

## Описание проекта
В вашем распоряжении данные сервиса Яндекс Недвижимость — архив объявлений за несколько лет о продаже квартир в 
Санкт-Петербурге и соседних населённых пунктах.

Ваша задача — выполнить предобработку данных и изучить их, чтобы найти интересные особенности и зависимости,
которые существуют на рынке недвижимости.

О каждой квартире в базе содержится два типа данных: добавленные пользователем и картографические. Например, к первому 
типу относятся площадь квартиры, её этаж и количество балконов, ко второму — расстояния до центра города, аэропорта и 
ближайшего парка. 

## Инструкция по выполнению проекта
### Шаг 1. Откройте файл с данными и изучите общую информацию
Путь к файлу: `/datasets/real_estate_data.csv`
1. Загрузите данные из файла в датафрейм.
2. Изучите общую информацию о полученном датафрейме.
3. Постройте общую гистограмму для всех числовых столбцов таблицы. Например, для датафрейма data это можно сделать 
4. командой data.hist(figsize=(15, 20)).
### Шаг 2. Предобработка данных
1. Найдите и изучите пропущенные значения в столбцах:
   * Определите, в каких столбцах есть пропуски.
   * Заполните пропущенные значения там, где это возможно. Например, если продавец не указал число балконов, то, скорее 
   всего, в его квартире их нет. Такие пропуски правильно заменить на 0. Если логичную замену предложить невозможно, то
   оставьте эти значения пустыми. Пропуски — тоже важный сигнал, который нужно учитывать.
   * В ячейке с типом `markdown` укажите причины, которые могли привести к пропускам в данных.
2. Рассмотрите типы данных в каждом столбце:
   * Найдите столбцы, в которых нужно изменить тип данных.
   * Преобразуйте тип данных в выбранных столбцах.
   * В ячейке с типом markdown поясните, почему нужно изменить тип данных.
3. Изучите уникальные значения в столбце с названиями и устраните неявные дубликаты. Например, «поселок Рябово» и 
«поселок городского типа Рябово», «поселок Тельмана» и «посёлок Тельмана» — это обозначения одних и тех же населённых 
пунктов. Вы можете заменить названия в существующем столбце или создать новый с названиями без дубликатов.
4. Найдите и устраните редкие и выбивающиеся значения. Например, в столбце ceiling_height может быть указана высота 
потолков 25 м и 32 м. Логично предположить, что на самом деле это вещественные значения: 2.5 м и 3.2 м. 
Попробуйте обработать аномалии в этом и других столбцах.
   * Если природа аномалии понятна и данные действительно искажены, то восстановите корректное значение.
   * В противном случае удалите редкие и выбивающиеся значения.
   * В ячейке с типом markdown опишите, какие особенности в данных вы обнаружили.
### Шаг 3. Добавьте в таблицу новые столбцы со следующими параметрами:
* цена одного квадратного метра;
* день недели публикации объявления (0 — понедельник, 1 — вторник и так далее);
* месяц публикации объявления;
* год публикации объявления;
* тип этажа квартиры (значения — «первый», «последний», «другой»);
* расстояние до центра города в километрах (переведите из м в км и округлите до целых значений).
### Шаг 4. Проведите исследовательский анализ данных:
#### Изучите следующие параметры объектов:
* общая площадь;
* жилая площадь;
* площадь кухни;
* цена объекта;
* количество комнат;
* высота потолков;
* этаж квартиры;
* тип этажа квартиры («первый», «последний», «другой»);
* общее количество этажей в доме;
* расстояние до центра города в метрах;
* расстояние до ближайшего аэропорта;
* расстояние до ближайшего парка;
* день и месяц публикации объявления.

Постройте отдельные гистограммы для каждого из этих параметров. Опишите все ваши наблюдения по параметрам в ячейке
с типом markdown.

#### Изучите, как быстро продавались квартиры (столбец days_exposition). 
Этот параметр показывает, сколько дней было размещено каждое объявление.
* Постройте гистограмму.
* Посчитайте среднее и медиану.
* В ячейке типа markdown опишите, сколько времени обычно занимает продажа. Какие продажи можно считать быстрыми, 
* а какие — необычно долгими?

#### Какие факторы больше всего влияют на общую (полную) стоимость объекта?
Изучите, зависит ли цена от:
* общей площади;
* жилой площади;
* площади кухни;
* количества комнат;
* этажа, на котором расположена квартира (первый, последний, другой);
* даты размещения (день недели, месяц, год).

Постройте графики, которые покажут зависимость цены от указанных выше параметров. Для подготовки данных перед 
визуализацией вы можете использовать сводные таблицы. 

Посчитайте среднюю цену одного квадратного метра в 10 населённых пунктах с наибольшим числом объявлений. 
Выделите населённые пункты с самой высокой и низкой стоимостью квадратного метра. Эти данные можно найти по имени 
в столбце locality_name.

Ранее вы посчитали расстояние до центра в километрах. Теперь выделите квартиры в Санкт-Петербурге с помощью столбца 
`locality_name` и вычислите среднюю цену каждого километра. Опишите, как стоимость объектов зависит от расстояния до 
центра города.
### Шаг 5. Напишите общий вывод
Опишите полученные результаты и зафиксируйте основной вывод проведённого исследования.

## Описание данных
* `airports_nearest` — расстояние до ближайшего аэропорта в метрах (м)
* `balcony` — число балконов
* `ceiling_height` — высота потолков (м)
* `cityCenters_nearest` — расстояние до центра города (м)
* `days_exposition` — сколько дней было размещено объявление (от публикации до снятия)
* `first_day_exposition` — дата публикации
* `floor` — этаж
* `floors_total` — всего этажей в доме
* `is_apartment` — апартаменты (булев тип)
* `kitchen_area` — площадь кухни в квадратных метрах (м²)
* `last_price` — цена на момент снятия с публикации
* `living_area` — жилая площадь в квадратных метрах (м²)
* `locality_name` — название населённого пункта
* `open_plan` — свободная планировка (булев тип)
* `parks_around3000` — число парков в радиусе 3 км
* `parks_nearest` — расстояние до ближайшего парка (м)
* `ponds_around3000` — число водоёмов в радиусе 3 км
* `ponds_nearest` — расстояние до ближайшего водоёма (м)
* `rooms` — число комнат
* `studio` — квартира-студия (булев тип)
* `total_area` — общая площадь квартиры в квадратных метрах (м²)
* `total_images` — число фотографий квартиры в объявлении


## 5. Общий вывод
### 5.1. Общая информация
В вашем распоряжении данные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и
соседних населённых пунктов за несколько лет. По каждой квартире на продажу доступны два вида данных. 
Первые вписаны пользователем, вторые — получены автоматически на основе картографических данных. Например, расстояние 
до центра, аэропорта, ближайшего парка и водоёма.

### 5.2. Предобработка данных
##### 5.2.1. Обработка пропусков 
**Пропуски из-за технической ошибки**

**Обнаружены в следующий столбцах, которы должны были быть заполнены "картографически"**
1. `airports_nearest` — расстояние до ближайшего аэропорта в метрах (м)
2. `city_centers_nearest` — расстояние до центра города (м)
3. `locality_name` — название населённого пункта
4. `parks_around3000` — число парков в радиусе 3 км
5. `parks_nearest` — расстояние до ближайшего парка (м)
6. `ponds_around3000` — число водоёмов в радиусе 3 км
7. `ponds_nearest` — расстояние до ближайшего водоёма (м)
**Иная техническая ошибка**
1. `days_exposition` — сколько дней было размещено объявление (от публикации до снятия)
**Пропуски из-за человеческого фактора**
1. `balcony` — число балконов
2. `ceiling_height` — высота потолков (м)
3. `floors_total` — всего этажей в доме
4. `is_apartment` — апартаменты (булев тип)
5. `kitchen_area` — площадь кухни в квадратных метрах (м²)
6. `living_area` — жилая площадь в квадратных метрах (м²)
**Комментарий**
Я убежден что есть возможность автоматического заполнения данных:
1. `floors_total` -> с помощью геометки пользователя определяем конкретный дом, храним в БД данные об этом здании
2. `ceiling_height` —> аналогично
3. `is_apartment` —> аналогично
##### 5.2.2. Изменение типов данных
Типы данных были земенены, у числовых был изменен обьем памяти, строковые типы были заменены на категориальные.
Это было сделано для экономии оперативной памяти.
##### 5.2.3. Работа с дубликатами
Явные дубликаты не были обнаружены, неявные дубликаты были удалены, так же была осуществена проверка с помощью 
алгоритма "Расстояние Левинштейна".
##### 5.2.4. Обработка аномальных занчений
Были выбросы в столбце `last_price`. Я уменьшил масштаб данных, до 5 медиан, добился распределения данных 
"Пауссона" на графике гистограммы.

### 5.3. Добавление новых столбцов
Мною были добавлены новые столбцы:
1. цена одного квадратного метра
2. день недели публикации объявления (0 — понедельник, 1 — вторник и так далее)
3. месяц публикации объявления
4. год публикации объявления
5. тип этажа квартиры (значения — «первый», «последний», «другой»)
6. расстояние до центра города в километрах

### 5.4. Исследовательский анализ данных
#### 5.4.1. Изучение параметров
1. Общая площадь имеет распределение Пуассона
2. Жилая площадь имеет распределение Пуассона
3. Площадь кухни имеет распределение Пуассона
4. Цена объекта имеет нормальное распределение
5. Количество комнат имеет распределение Пуассона
6. Высота потолоков имеет распределение Пуассона
7. Этаж квартиры распределение Пуассона
8. Тип этажа квартиры: Большинство квартин не на 1 и не на последнем этаже, это верно исходя из теор. вера
9. Общее количество этажей в доме имеет нормальное распределение
10. Расстояние до центра города в метрах имеет нормальное распределение
11. Расстояние до ближайшего аэропорта имеет нормальное распределение
12. Расстояние до ближайшего парка имеет нормальное распределение
13. День публикации объявления. Большинство объявления публикуются в начале недели
14. Месяц публикации объявления. Видим снижение количества публикаций летом
#### 5.4.2. Исследование скорости продажи квартиры
1. Гистограмма: данные (срок продажи объявлений) имеют распределение Пуассона
2. Среднее время продажи квартир - 170 дней.
3. Медианное время продажи квартир - 95 дней. 
4. Среднее арифметическое больше, я думаю это связано с аномально долгими продажами неликвидных крватрир. Это значит,
что в среднем квартира должня продаться за 95 дней. Неообычно долгии пррдажи - более 170 дней. Быстрые продажи - 
менее 95 дней с момента публикации обьявления.
#### 5.4.3. Влияние факторов на срок продажи квартиры
1. **Общаяя площадь.** Коэфицент кореляции равен 0.78, анализируя диаграмму рассеивания и матрицу совместного 
распределения, мы можем найти нечто схожее с графиком f(x) = k * x, тоесть линейную зависимость в данных, таких образом,
можно утверждать что с увеличением общей площади квартиры увеличивается стоимость жилья.
2. **Жилая площадь.** Коэфицент кореляции равен 0.68, анализируя диаграмму рассеивания и матрицу совместного 
распределения, мы можем найти нечто схожее с графиком f(x) = k * x, тоесть линейную зависимость в данных, таких образом,
можно утверждать что с увеличением жилой площади квартиры увеличивается стоимость жилья.
3. **Площадь кухни.** Коэфицент кореляции равен 0.57, анализируя диаграмму рассеивания и матрицу совместного 
распределения, мы можем найти нечто схожее с графиком f(x) = k * x, тоесть линейную зависимость в данных, таких образом,
можно утверждать что с увеличением площади кухни, незначительно увеличивается стоимость жилья. Я убежден что площадь 
кухни это зависимая от общей площади квартиры величина, и анализировать именно зависимость стоимости от площади кухни 
не имеет смыла.
4. **Количество комнат.** Коэфицент кореляции равен 0.52, значит что есть есть линейная зависимость.
5. **Тип этажа.** Мы можем сделать вывод, что квартиры на 1 этаже в среднем, стоят дешевле
6. **Дата размещения.** Коэфицент кореляции равен для всех трех фич, около 0, это значит что линейной зависимости 
цены квартиры от даты публикации обьявления нет.
#### 5.4.4. Средняя цена одного квадратного метра
1. Самая высокая средняя стоимость за квадратный метр - В городе Санкт-Петербург, она составляет 109 439 рублей
2. Самая низкая средняя стоимость за квадратный метр - В городе Всеволожск, она составляет 67 663 рублей
#### 5.4.5. Средняя стоимость километра от центра говрода в СПБ
1. Стоимость квартиры обратно пропорциональна расстоянию до центра города
2. 6 473 304 рублей - средняя стоимость 1 км близости к центру города
3. 2 123 585 рублей - дисперсия
4. 5 857 299 рублей - медиана